import{r as c,f as X,k as Z,l as J,m as tt,n as et,j as lt,p as st,M as at,o as w,g as V,w as a,a as l,b as s,h as e,s as nt,v as ot,x as rt,d as r,c as O,y as q,F as L,t as d,z as dt,A as it,i as ut,B as ft}from"./Cmpe_WKc.js";import{_ as ct,a as mt,e as pt}from"./p5wUNx35.js";import{a as gt}from"./C8DqakIB.js";import{d as K,b as Q,a as I,_ as p,c as Y,e as g}from"./Bc_9lAEa.js";import{_ as bt}from"./DoUMQrUc.js";import{E as G,_ as xt}from"./Sf-hDRAx.js";import"./BDck7c17.js";import"./3YEt712n.js";function _t(){const P=c(null),N=X(),u=c(!1),j=lt(),_=4,R=10,b=c(1),k=c(0),x=c([]),S=async()=>{u.value=!0,P.value=null;let n=`${j.public.apiBaseUrl}/api/v1/orderItem?pageNumber=${b.value}`;try{const i=(await gt.get(n)).data;x.value=i.content,k.value=i.totalRecords}catch(t){console.error("Fetch Error:",t),P.value="Failed to fetch data"}finally{u.value=!1}};Z(()=>{S()});const C=n=>{n<1||n>$.value||(b.value=n,S())},$=J(()=>k.value>0?Math.ceil(k.value/R):1),B=J(()=>{const n=[];let t=Math.max(b.value-Math.floor(_/2),1),i=Math.min(t+_-1,$.value);i-t<_-1&&(t=Math.max(i-_+1,1));for(let h=t;h<=i;h++)n.push(h);return n}),T=n=>{if(!n)return"-";const t=new Date(n),i=t.getFullYear(),h=String(t.getMonth()+1).padStart(2,"0"),F=String(t.getDate()).padStart(2,"0"),z=String(t.getHours()).padStart(2,"0"),M=String(t.getMinutes()).padStart(2,"0");return`${F}-${h}-${i} ${z}:${M}`},A=tt(),f=c([]),m=c(!1),v=c(!1),E=()=>{m.value?f.value=x.value.map(n=>n.id):f.value=[]},y=n=>{const t=f.value.indexOf(n);t>-1?f.value.splice(t,1):f.value.push(n)};return et(f,n=>{n.length===0?(m.value=!1,v.value=!1):n.length===x.value.length?(m.value=!0,v.value=!1):(m.value=!1,v.value=!0)}),{orderDetail:x,error:P,currentPage:b,totalRecords:k,totalPages:$,paginatedPages:B,fetchOrderDetail:S,changePage:C,formatDate:T,loading:u,selectAll:m,indeterminate:v,toggleSelectAll:E,toggleOrder:y,viewOrderDetailById:n=>{if(n.length!==1){N.add({title:"Please select only one product!"});return}else A.push(`/report/view/${n[0]}`)},selectedOrder:f}}const vt={class:"px-4 py-4"},yt={class:"flex justify-between px-3"},ht={class:""},wt=["indeterminate"],kt=["checked","onChange"],$t={class:"flex flex-col items-center justify-start h-auto"},Dt={class:"px-2 py-3 mx-auto text-black w-[100mm] min-h-[210mm] font-khmer"},St={class:"flex justify-between mb-2 text-sm"},Ct={class:"space-y-1 text-sm"},Pt={class:"flex justify-between"},Bt={class:"flex justify-between"},Mt={class:"flex justify-between font-bold"},Ot={class:"z-0 w-full mt-3"},It={class:"flex justify-center md:justify-between"},Nt={class:"hidden w-full md:block"},jt={class:"mt-1.5 font-sans text-md text-gray-900 dark:text-gray-200"},Rt={class:"font-semibold text-blue-700"},Tt={class:"mt-1.5 font-sans text-md text-gray-900 dark:text-gray-200"},At={class:"font-semibold text-blue-700"},Et={class:"font-semibold text-blue-700"},Ft={class:"flex items-center gap-4"},zt=["disabled"],Vt={class:"flex items-center gap-2"},qt=["onClick"],Lt={class:"absolute transform -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2"},Ut=["disabled"],Zt=st({__name:"index",setup(P){const{orderDetail:N,currentPage:u,totalRecords:j,totalPages:_,paginatedPages:R,changePage:b,formatDate:k,selectAll:x,indeterminate:S,selectedOrder:C,toggleSelectAll:$,toggleOrder:B,viewOrderDetailById:T}=_t(),A=new Date().toLocaleDateString(),f=c({qty:0,price:0}),m=f.value.qty*f.value.price,v=m*.1,E=m+v;function y(n){return"$"+n.toFixed(2)}const U=c([]);return at(()=>{const n=localStorage.getItem("receipt");n&&(U.value=JSON.parse(n))}),(n,t)=>{const i=dt,h=ct,F=mt,z=pt,M=it;return w(),V(e(bt),{class:"w-full"},{default:a(()=>[l("div",vt,[l("div",yt,[t[7]||(t[7]=l("div",{class:"text-blue-700"},[l("h2",null,"Sale Report"),l("p",{class:"text-blue-700 opacity-70"},"Here is a list of all sale report")],-1)),l("div",ht,[s(i,{size:"sm",class:"text-blue-800 bg-blue-200 disabled:opacity-50 hover:bg-blue-100 disabled:bg-blue-400",disabled:e(C).length===0,onClick:t[0]||(t[0]=o=>{e(T)(e(C))})},{default:a(()=>[s(e(G),{class:"w-4 h-4"}),t[6]||(t[6]=l("span",null,"View",-1))]),_:1},8,["disabled"])])]),s(e(K),null,{default:a(()=>[s(e(Q),null,{default:a(()=>[s(e(I),null,{default:a(()=>[s(e(p),null,{default:a(()=>[nt(l("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=o=>rt(x)?x.value=o:null),onChange:t[2]||(t[2]=(...o)=>e($)&&e($)(...o)),indeterminate:e(S)},null,40,wt),[[ot,e(x)]])]),_:1}),s(e(p),{class:"hidden md:table-cell"},{default:a(()=>t[8]||(t[8]=[r("No")])),_:1}),s(e(p),null,{default:a(()=>t[9]||(t[9]=[r("Order No")])),_:1}),s(e(p),null,{default:a(()=>t[10]||(t[10]=[r("Date")])),_:1}),s(e(p),null,{default:a(()=>t[11]||(t[11]=[r("Details")])),_:1})]),_:1})]),_:1}),s(e(Y),null,{default:a(()=>[(w(!0),O(L,null,q(e(N),(o,H)=>(w(),V(e(I),{key:o.id,class:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800",onClick:D=>e(B)(o.id)},{default:a(()=>[s(e(g),{onClick:t[3]||(t[3]=ut(()=>{},["stop"]))},{default:a(()=>[l("input",{type:"checkbox",checked:e(C).includes(o.id),onChange:D=>e(B)(o.productId)},null,40,kt)]),_:2},1024),s(e(g),null,{default:a(()=>[r(d(H+1),1)]),_:2},1024),s(e(g),null,{default:a(()=>[r(d(o.orderNo||"-"),1)]),_:2},1024),s(e(g),{class:"hidden md:table-cell"},{default:a(()=>[r(d(e(k)(o.createdDate)||"-"),1)]),_:2},1024),s(e(g),null,{default:a(()=>[s(z,{class:"h-[210mm] w-[100mm]"},{default:a(()=>[s(h,null,{default:a(()=>[s(i,{class:"h-6 text-blue-800 bg-blue-200 disabled:opacity-50 hover:bg-blue-100 disabled:bg-blue-400"},{default:a(()=>[s(e(G),{class:"w-4 h-4"}),t[12]||(t[12]=l("span",null,"View",-1))]),_:1})]),_:1}),s(F,{class:"w-full"},{default:a(()=>[l("div",$t,[l("div",Dt,[t[21]||(t[21]=l("div",{class:"mb-4 text-center"},[l("h1",{class:"text-lg font-bold"},"Raksmey Kampuchea Bookstore"),l("p",{class:"text-sm"},"#123 Main Street, City"),l("p",{class:"text-sm"},"Tel: 012-345-678")],-1)),t[22]||(t[22]=l("hr",{class:"my-2 border-dashed"},null,-1)),l("div",St,[l("p",null,"Date: "+d(e(A)),1),t[13]||(t[13]=l("p",null,"SALE0001",-1))]),s(e(K),null,{default:a(()=>[s(e(Q),null,{default:a(()=>[s(e(I),null,{default:a(()=>[s(e(p),null,{default:a(()=>t[14]||(t[14]=[r("Item")])),_:1}),s(e(p),null,{default:a(()=>t[15]||(t[15]=[r("Name")])),_:1}),s(e(p),null,{default:a(()=>t[16]||(t[16]=[r("Qty")])),_:1}),s(e(p),null,{default:a(()=>t[17]||(t[17]=[r("Price")])),_:1})]),_:1})]),_:1}),(w(!0),O(L,null,q(o.orderItems,(D,W)=>(w(),V(e(Y),{key:D.id},{default:a(()=>[s(e(I),{class:"grid grid-cols-4 py-1"},{default:a(()=>[s(e(g),null,{default:a(()=>[r(d(W+1),1)]),_:2},1024),s(e(g),null,{default:a(()=>[r(d(D.productName),1)]),_:2},1024),s(e(g),null,{default:a(()=>[r(d(y(D.quantity)),1)]),_:2},1024),s(e(g),null,{default:a(()=>[r(d(y(D.price)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024),t[23]||(t[23]=l("hr",{class:"my-2 border-dashed"},null,-1)),l("div",Ct,[l("div",Pt,[t[18]||(t[18]=l("span",null,"Subtotal",-1)),l("span",null,d(y(m)),1)]),l("div",Bt,[t[19]||(t[19]=l("span",null,"Tax (10%)",-1)),l("span",null,d(y(v)),1)]),l("div",Mt,[t[20]||(t[20]=l("span",null,"Total",-1)),l("span",null,d(y(E)),1)])]),t[24]||(t[24]=l("hr",{class:"my-2 border-dashed"},null,-1)),t[25]||(t[25]=l("p",{class:"mt-4 text-xs text-center"},"Thank you for your purchase!",-1))])])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),s(e(xt),null,{default:a(()=>[l("div",Ot,[l("div",It,[l("div",Nt,[l("p",jt,[t[26]||(t[26]=r(" Showing ")),t[27]||(t[27]=l("span",{class:"font-semibold text-blue-700"},"1-10",-1)),t[28]||(t[28]=r(" of ")),l("span",Rt,d(e(j)),1)]),l("p",Tt,[t[29]||(t[29]=r(" Showing page ")),l("span",At,d(e(u)),1),t[30]||(t[30]=r(" of ")),l("span",Et,d(e(_)),1)])]),l("div",Ft,[l("button",{onClick:t[4]||(t[4]=o=>e(b)(e(u)-1)),disabled:e(u)===1,type:"button",class:"flex items-center gap-2 px-6 py-3 rounded-full text-centeralign-middle dark:text-gray-50 hover:bg-gray-100 active:bg-gray-900/20 disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none"},[s(M,{name:"mingcute:arrow-left-fill",class:"w-4 h-4 text-blue-700 dark:text-gray-200"})],8,zt),l("div",Vt,[(w(!0),O(L,null,q(e(R),o=>(w(),O("button",{key:o,onClick:H=>e(b)(o),type:"button",class:ft(["relative h-14 max-h-[30px] w-14 max-w-[30px] select-none rounded-full text-center align-middle font-sans text-xs font-medium uppercase transition-all",e(u)===o?"bg-blue-200 text-blue-800 dark:bg-gray-900 dark:text-gray-50 shadow-md":"bg-gray-50 text-blue-800 hover:bg-gray-100 dark:bg-gray-800 dark:text-gray-600 dark:hover:bg-gray-800 active:bg-gray-900/20"])},[l("span",Lt,d(o),1)],10,qt))),128))]),l("button",{onClick:t[5]||(t[5]=o=>e(b)(e(u)+1)),disabled:e(u)===e(_),type:"button",class:"flex items-center gap-2 px-6 py-3 rounded-full text-centeralign-middle dark:text-gray-50 hover:bg-gray-100 active:bg-gray-900/20 disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none"},[s(M,{name:"mingcute:arrow-right-fill",class:"w-4 h-4 text-blue-700 dark:text-gray-200"})],8,Ut)])])])]),_:1})])]),_:1})}}});export{Zt as default};
