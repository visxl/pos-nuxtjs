import{r as b,f as O,k as Y,l as U,m as G,n as J,j as K,p as Q,q as W,o as I,c as T,a as o,b as l,w as n,h as t,d as r,s as X,v as Z,x as ee,F as V,y as H,t as y,z as te,A as ae,g as se,i as le,B as q}from"./Cmpe_WKc.js";import{_ as oe,a as ne,b as de,c as re,d as ie,e as ue}from"./Bc_9lAEa.js";import{S as ce,T as ge,_ as fe}from"./BlJ68nKr.js";import{_ as me}from"./DoUMQrUc.js";import{_ as be,E as ye}from"./Sf-hDRAx.js";import{a as L}from"./C8DqakIB.js";import"./BDck7c17.js";import"./3YEt712n.js";function pe(){const P=b(null),p=O(),_=b(!1),u=K(),C=b([]),z=b(0),v=4,$=10,w=b(1),x=b(0),i=async()=>{_.value=!0,P.value=null;let a=`${u.public.apiBaseUrl}/api/v1/category?pageNumber=${w.value}`;try{const g=(await L.get(a)).data;C.value=g.content,x.value=g.totalRecords}catch(d){console.error("Fetch Error:",d),P.value="Failed to fetch data"}finally{_.value=!1}};Y(()=>{i()});const S=async a=>{try{await L.delete(`${u.public.apiBaseUrl}/api/v1/category/delete?categoryId=${a}`),p.add({title:"Successfully deleted category!"}),window.location.reload()}catch(d){p.add({title:"Failed to delete category!"}),console.error("Delete Error:",d)}},E=a=>{a<1||a>B.value||(w.value=a,i())},B=U(()=>x.value>0?Math.ceil(x.value/$):1),M=U(()=>{const a=[];let d=Math.max(w.value-Math.floor(v/2),1),g=Math.min(d+v-1,B.value);g-d<v-1&&(d=Math.max(g-v+1,1));for(let h=d;h<=g;h++)a.push(h);return a}),R=a=>{if(!a)return"-";const d=new Date(a),g=d.getFullYear(),h=String(d.getMonth()+1).padStart(2,"0");return`${String(d.getDate()).padStart(2,"0")}-${h}-${g}`},e=G(),f=b([]),m=b(!1),c=b(!1),D=()=>{m.value?f.value=C.value.map(a=>a.categoryId):f.value=[]},F=a=>{const d=f.value.indexOf(a);d>-1?f.value.splice(d,1):f.value.push(a)};return J(f,a=>{a.length===0?(m.value=!1,c.value=!1):a.length===C.value.length?(m.value=!0,c.value=!1):(m.value=!1,c.value=!0)}),{category:C,loading:_,changePage:E,currentPage:w,totalRecords:x,totalPages:B,paginatedPages:M,categoryId:z,fetchCategory:i,error:P,formatDate:R,deleteCategory:S,deleteCategoriesByIds:a=>{console.log(`Deleting category with IDs: ${a.join(", ")}`)},selectAll:m,indeterminate:c,toggleSelectAll:D,toggleProduct:F,selectedCategory:f,viewCategoryById:a=>{if(a.length!==1){p.add({title:"Please select only one product!"});return}else e.push(`/inventory/category/view/${a[0]}`)},editCategoryById:a=>{if(a.length!==1){p.add({title:"Please select only one category!"});return}else e.push(`/inventory/category/edit/${a[0]}`)},config:u,toast:p}}const _e={class:"flex flex-col"},ve={class:"grid items-start flex-1 gap-4"},xe={class:"flex items-center gap-2 ml-auto"},he={class:"px-4 py-4"},Ce=["indeterminate"],we=["checked","onChange"],ke={class:"z-0 w-full mt-3"},$e={class:"flex justify-center md:justify-between"},Be={class:"hidden w-full md:block"},Ie={class:"mt-1.5 font-sans text-md text-gray-900 dark:text-gray-200"},Pe={class:"font-semibold text-blue-700"},Se={class:"mt-1.5 font-sans text-md text-gray-900 dark:text-gray-200"},De={class:"font-semibold text-blue-700"},Te={class:"font-semibold text-blue-700"},ze={class:"flex items-center gap-4"},Ee=["disabled"],Me={class:"flex items-center gap-2"},Fe=["onClick"],Re={class:"absolute transform -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2"},Ne=["disabled"],Ye=Q({__name:"index",setup(P){const{category:p,changePage:_,currentPage:u,paginatedPages:C,totalRecords:z,totalPages:v,selectAll:$,indeterminate:w,toggleSelectAll:x,selectedCategory:i,toggleProduct:S,viewCategoryById:E,editCategoryById:B,deleteCategoriesByIds:M}=pe();return(R,e)=>{const f=W("CreateProduct"),m=te,c=oe,D=ne,F=de,k=ue,N=fe,j=re,a=ie,d=ae,g=be,h=me;return I(),T("div",_e,[o("main",ve,[o("div",xe,[l(f),l(m,{size:"sm",class:"text-blue-800 bg-blue-200 disabled:opacity-50 hover:bg-blue-100 disabled:bg-blue-400",disabled:t(i).length===0,onClick:e[0]||(e[0]=s=>{t(E)(t(i))})},{default:n(()=>[l(t(ye),{class:"w-4 h-4"}),e[8]||(e[8]=o("span",null,"View",-1))]),_:1},8,["disabled"]),l(m,{size:"sm",class:"text-green-700 bg-green-200 disabled:opacity-50 hover:bg-green-100 disabled:bg-green-400",disabled:t(i).length===0,onClick:e[1]||(e[1]=s=>t(B)(t(i)))},{default:n(()=>[l(t(ce),{class:"w-4 h-4"}),e[9]||(e[9]=r(" Edit "))]),_:1},8,["disabled"]),l(m,{size:"sm",class:"text-red-700 bg-red-200 disabled:opacity-50 hover:bg-red-100 disabled:bg-red-400",disabled:t(i).length===0,onClick:e[2]||(e[2]=s=>t(M)(t(i)))},{default:n(()=>[l(t(ge),{class:"w-4 h-4"}),e[10]||(e[10]=o("span",null,"Delete",-1))]),_:1},8,["disabled"])]),l(h,{class:"w-full"},{default:n(()=>[o("div",he,[e[20]||(e[20]=o("div",{class:"flex justify-between px-3"},[o("div",{class:"text-blue-700"},[o("h2",null,"Categories"),o("p",{class:"text-blue-700 opacity-70"},"Here is a list of all categories")])],-1)),l(a,null,{default:n(()=>[l(F,null,{default:n(()=>[l(D,null,{default:n(()=>[l(c,null,{default:n(()=>[X(o("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=s=>ee($)?$.value=s:null),onChange:e[4]||(e[4]=(...s)=>t(x)&&t(x)(...s)),indeterminate:t(w)},null,40,Ce),[[Z,t($)]])]),_:1}),l(c,{class:"hidden md:table-cell"},{default:n(()=>e[11]||(e[11]=[r("ID")])),_:1}),l(c,{class:"hidden md:table-cell"},{default:n(()=>e[12]||(e[12]=[r("Code")])),_:1}),l(c,{class:"hidden font-sans md:table-cell"},{default:n(()=>e[13]||(e[13]=[r("Name")])),_:1}),l(c,null,{default:n(()=>e[14]||(e[14]=[r("Status")])),_:1})]),_:1})]),_:1}),l(j,null,{default:n(()=>[(I(!0),T(V,null,H(t(p),s=>(I(),se(D,{key:s.categoryId,class:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800",onClick:A=>t(S)(s.categoryId)},{default:n(()=>[l(k,{onClick:e[5]||(e[5]=le(()=>{},["stop"]))},{default:n(()=>[o("input",{type:"checkbox",checked:t(i).includes(s.categoryId),onChange:A=>t(S)(s.categoryId)},null,40,we)]),_:2},1024),l(k,null,{default:n(()=>[r(y(s.categoryId||"-"),1)]),_:2},1024),l(k,null,{default:n(()=>[r(y(s.categoryCode||"-"),1)]),_:2},1024),l(k,null,{default:n(()=>[r(y(s.categoryName||"-"),1)]),_:2},1024),l(k,{class:"hidden md:table-cell"},{default:n(()=>[l(N,{size:"sm",class:q(["text-center",s.status===!0?"text-blue-500 bg-blue-100 border-blue-500":s.status===!1?"text-red-500 border-red-500 bg-red-100":"text-gray-500 border-gray-300 "])},{default:n(()=>[r(y(s.status===!0?"Enabled":s.status===!1?"Disabled":"-"),1)]),_:2},1032,["class"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),l(g,null,{default:n(()=>[o("div",ke,[o("div",$e,[o("div",Be,[o("p",Ie,[e[15]||(e[15]=r(" Showing ")),e[16]||(e[16]=o("span",{class:"font-semibold text-blue-700"},"1-10",-1)),e[17]||(e[17]=r(" of ")),o("span",Pe,y(t(z)),1)]),o("p",Se,[e[18]||(e[18]=r(" Showing page ")),o("span",De,y(t(u)),1),e[19]||(e[19]=r(" of ")),o("span",Te,y(t(v)),1)])]),o("div",ze,[o("button",{onClick:e[6]||(e[6]=s=>t(_)(t(u)-1)),disabled:t(u)===1,type:"button",class:"flex items-center gap-2 px-6 py-3 rounded-full text-centeralign-middle dark:text-gray-50 hover:bg-gray-100 active:bg-gray-900/20 disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none"},[l(d,{name:"mingcute:arrow-left-fill",class:"w-4 h-4 text-blue-700 dark:text-gray-200"})],8,Ee),o("div",Me,[(I(!0),T(V,null,H(t(C),s=>(I(),T("button",{key:s,onClick:A=>t(_)(s),type:"button",class:q(["relative h-14 max-h-[30px] w-14 max-w-[30px] select-none rounded-full text-center align-middle font-sans text-xs font-medium uppercase transition-all",t(u)===s?"bg-blue-200 text-blue-800 dark:bg-gray-900 dark:text-gray-50 shadow-md":"bg-gray-50 text-blue-800 hover:bg-gray-100 dark:bg-gray-800 dark:text-gray-600 dark:hover:bg-gray-800 active:bg-gray-900/20"])},[o("span",Re,y(s),1)],10,Fe))),128))]),o("button",{onClick:e[7]||(e[7]=s=>t(_)(t(u)+1)),disabled:t(u)===t(v),type:"button",class:"flex items-center gap-2 px-6 py-3 rounded-full text-centeralign-middle dark:text-gray-50 hover:bg-gray-100 active:bg-gray-900/20 disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none"},[l(d,{name:"mingcute:arrow-right-fill",class:"w-4 h-4 text-blue-700 dark:text-gray-200"})],8,Ne)])])])]),_:1})])]),_:1})])])}}});export{Ye as default};
