import{_ as w}from"./CUvuq6jS.js";import{_ as q}from"./bgxFSIxJ.js";import{_ as U,S as P}from"./D6PemBMT.js";import{_ as k}from"./DoUMQrUc.js";import{f as h,r as c,n as b,g as S,w as m,o as B,a as o,b as r,h as f,i as E,j as $}from"./Cmpe_WKc.js";import{a as g}from"./C8DqakIB.js";import{C as M}from"./CUG2mVAH.js";import"./BDck7c17.js";import"./3YEt712n.js";const F={class:"flex items-center justify-between mb-4"},j={class:"grid grid-cols-4 gap-4"},O={class:"col-span-4"},Q={class:"col-span-4"},T={class:"col-span-4"},z={class:"col-span-4"},G={class:"col-span-4"},I={class:"col-span-4"},L={class:"col-span-4"},R={class:"col-span-4"},te={__name:"index",setup(A){const p=$(),d=h();c(!1);const t=c({productCode:"",productName:"",cost:"",price:"",quantity:"",unit:"",status:"",categoryName:"",categoryCode:""}),x=["kg","g","pcs","box"],V=async()=>{try{await g.post(`${p.public.apiBaseUrl}/api/v1/product/create`,t.value),d.add({title:"Successfully Created Product!"})}catch(l){l.response&&l.response.status===409?d.add({title:"Product code already exists",variant:"danger"}):d.add({title:"Failed To Create Product!"})}},i=c([]),y=c([]),v=c([]),C=async()=>{try{const l=await g.get(`${p.public.apiBaseUrl}/api/v1/category/categories`);i.value=l.data,y.value=i.value.map(e=>e.categoryCode),v.value=i.value.map(e=>e.categoryName)}catch{d.add({title:"Failed to fetch categories"})}};b(()=>t.value.categoryCode,l=>{const e=i.value.find(u=>u.categoryCode===l);e&&(t.value.categoryName=e.categoryName)}),b(()=>t.value.categoryName,l=>{const e=i.value.find(u=>u.categoryName===l);e&&(t.value.categoryCode=e.categoryCode)});const N=async()=>{var u;let l=!1,e=0;for(;!l&&e<10;){const s=Math.floor(1e8+Math.random()*9e8);try{const n=await g.get(`${p.public.apiBaseUrl}/api/v1/product/check-code/${s}`);console.log("Product fetched:",n.data),n.data?e++:(t.value.productCode=s,l="true",d.add({title:"Generated unique product code: "+s}))}catch{d.add({title:"Error checking product code"}),console.error("Error fetching product:",((u=error.response)==null?void 0:u.data)||error.message);break}}l||d.add({title:"Failed to generate a unique product code"})};return(l,e)=>{const u=w,s=q,n=U,_=k;return B(),S(_,{class:"p-4 bg-white rounded-lg shadow-md mx-4-auto max-w-[800px] w-full"},{default:m(()=>[o("form",{onSubmit:E(V,["prevent"]),class:"w-full gap-4"},[o("div",F,[e[9]||(e[9]=o("div",null,[o("h1",{class:"text-2xl font-bold text-blue-700"},"Create Product"),o("p",{class:"text-sm text-blue-600 opacity-80"},"Create a new product for your inventory.")],-1)),o("div",null,[r(u,{type:"submit",size:"sm",class:"mb-4 text-blue-700 bg-blue-200 hover:bg-blue-100"},{default:m(()=>[r(f(M),{class:"w-4 h-4 mr-2"}),e[8]||(e[8]=o("span",null,"Create",-1))]),_:1})])]),o("div",j,[o("div",O,[e[10]||(e[10]=o("span",{class:"text-blue-700"},"Product Code : ",-1)),r(s,{modelValue:t.value.productCode,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.productCode=a),label:"Category Code",placeholder:"Enter category code",class:"flex gap-2",required:""},{default:m(()=>[o("button",{type:"button",class:"px-2 py-2 text-sm text-blue-700 bg-blue-200 rounded hover:bg-blue-100",onClick:N},[r(f(P),{class:"w-4 h-4"})])]),_:1},8,["modelValue"])]),o("div",Q,[e[11]||(e[11]=o("span",{class:"text-blue-700"},"Product Name : ",-1)),r(s,{modelValue:t.value.productName,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.productName=a),label:"Category Name",placeholder:"Enter category name",error:t.value.productName===""?"Product name is required":"",required:"true"},null,8,["modelValue","error"])]),o("div",T,[e[12]||(e[12]=o("span",{class:"text-blue-700"},"Cost : ",-1)),r(s,{modelValue:t.value.cost,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.cost=a),label:"Cost",placeholder:"Enter cost",type:"number",error:t.value.cost===""?"Cost is required":""},null,8,["modelValue","error"])]),o("div",z,[e[13]||(e[13]=o("span",{class:"text-blue-700"},"Price : ",-1)),r(s,{modelValue:t.value.price,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.price=a),label:"Price",placeholder:"Enter price",type:"number",error:t.value.price===""?"Price is required":""},null,8,["modelValue","error"])]),o("div",G,[e[14]||(e[14]=o("span",{class:"text-blue-700"},"Quantity : ",-1)),r(s,{modelValue:t.value.quantity,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.quantity=a),label:"Price",placeholder:"Enter quantity",type:"number",error:t.value.quantity===""?"Quantity is required":""},null,8,["modelValue","error"])]),o("div",I,[e[15]||(e[15]=o("span",{class:"text-blue-700"},"Units : ",-1)),r(n,{modelValue:t.value.unit,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.unit=a),label:"Unit",placeholder:"Select unit",options:x},null,8,["modelValue"])]),o("div",L,[e[16]||(e[16]=o("span",{class:"text-blue-700"},"Category Name : ",-1)),r(n,{modelValue:t.value.categoryName,"onUpdate:modelValue":e[6]||(e[6]=a=>t.value.categoryName=a),label:"Category Name",placeholder:"Select Category Name",options:v.value,onClick:C,error:t.value.categoryName===""?"Category Name is required":""},null,8,["modelValue","options","error"])]),o("div",R,[e[17]||(e[17]=o("span",{class:"text-blue-700"},"Category Code : ",-1)),r(n,{modelValue:t.value.categoryCode,"onUpdate:modelValue":e[7]||(e[7]=a=>t.value.categoryCode=a),label:"Category Code",placeholder:"Select Category Code",options:y.value,onClick:C,error:t.value.categoryCode===""?"Category Code is required":""},null,8,["modelValue","options","error"])])])],32)]),_:1})}}};export{te as default};
