import{aE as le}from"./DgWlP6BF.js";function pe(A,x){for(var r=0;r<x.length;r++){const h=x[r];if(typeof h!="string"&&!Array.isArray(h)){for(const d in h)if(d!=="default"&&!(d in A)){const y=Object.getOwnPropertyDescriptor(h,d);y&&Object.defineProperty(A,d,y.get?y:{enumerable:!0,get:()=>h[d]})}}}return Object.freeze(Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}))}var J={exports:{}};(function(A){(function(x){A.exports?(x.default=x,A.exports=x):x(typeof Highcharts<"u"?Highcharts:void 0)})(function(x){var r=x?x._modules:{};function h(d,y,b,G){d.hasOwnProperty(y)||(d[y]=G.apply(null,b),typeof CustomEvent=="function"&&x.win.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:y,module:d[y]}})))}h(r,"Maps/TilesProviders/OpenStreetMap.js",[],function(){return class{constructor(){this.defaultCredits='Map data &copy2023 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',this.initialProjectionName="WebMercator",this.subdomains=["a","b","c"],this.themes={Standard:{url:"https://tile.openstreetmap.org/{zoom}/{x}/{y}.png",minZoom:0,maxZoom:19},Hot:{url:"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",minZoom:0,maxZoom:19},OpenTopoMap:{url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",minZoom:0,maxZoom:17,credits:`Map data: &copy; <a href="https://www.openstreetmap.org/copyright">
                        OpenStreetMap</a> contributors, <a href="https://viewfinderpanoramas.org">SRTM</a> 
                        | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> 
                        (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)`}}}}}),h(r,"Maps/TilesProviders/Stamen.js",[],function(){return class{constructor(){this.defaultCredits='&copy; Map tiles by <a href="https://stamen.com">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="https://openstreetmap.org">OpenStreetMap</a>, under <a href="https://www.openstreetmap.org/copyright">ODbL</a>',this.initialProjectionName="WebMercator",this.subdomains=["a","b","c","d"],this.themes={Toner:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}.png",minZoom:0,maxZoom:20},TonerBackground:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}.png",minZoom:0,maxZoom:20},TonerLite:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png",minZoom:0,maxZoom:20},Terrain:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png",minZoom:0,maxZoom:18},TerrainBackground:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/terrain-background/{z}/{x}/{y}.png",minZoom:0,maxZoom:18},Watercolor:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png",minZoom:1,maxZoom:16,credits:'&copy Map tiles by <a href="https://stamen.com">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="https://openstreetmap.org">OpenStreetMap</a>, under <a href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'}}}}}),h(r,"Maps/TilesProviders/LimaLabs.js",[],function(){return class{constructor(){this.defaultCredits='Map data &copy;2023 <a href="https://maps.lima-labs.com/">LimaLabs</a>',this.initialProjectionName="WebMercator",this.requiresApiKey=!0,this.themes={Standard:{url:"https://cdn.lima-labs.com/{zoom}/{x}/{y}.png?api={apikey}",minZoom:0,maxZoom:20}}}}}),h(r,"Maps/TilesProviders/Thunderforest.js",[],function(){return class{constructor(){this.defaultCredits='Maps &copy <a href="https://www.thunderforest.com">Thunderforest</a>, Data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap contributors</a>',this.initialProjectionName="WebMercator",this.requiresApiKey=!0,this.subdomains=["a","b","c"],this.themes={OpenCycleMap:{url:"https://{s}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png?apikey={apikey}",minZoom:0,maxZoom:22},Transport:{url:"https://{s}.tile.thunderforest.com/transport/{z}/{x}/{y}.png?apikey={apikey}",minZoom:0,maxZoom:22},TransportDark:{url:"https://{s}.tile.thunderforest.com/transport-dark/{z}/{x}/{y}.png?apikey={apikey}",minZoom:0,maxZoom:22},SpinalMap:{url:"https://{s}.tile.thunderforest.com/spinal-map/{z}/{x}/{y}.png?apikey={apikey}",minZoom:0,maxZoom:22},Landscape:{url:"https://{s}.tile.thunderforest.com/landscape/{z}/{x}/{y}.png?apikey={apikey}",minZoom:0,maxZoom:22},Outdoors:{url:"https://{s}.tile.thunderforest.com/outdoors/{z}/{x}/{y}.png?apikey={apikey}",minZoom:0,maxZoom:22},Pioneer:{url:"https://{s}.tile.thunderforest.com/pioneer/{z}/{x}/{y}.png?apikey={apikey}",minZoom:0,maxZoom:22},MobileAtlas:{url:"https://{s}.tile.thunderforest.com/mobile-atlas/{z}/{x}/{y}.png?apikey={apikey}",minZoom:0,maxZoom:22},Neighbourhood:{url:"https://{s}.tile.thunderforest.com/neighbourhood/{z}/{x}/{y}.png?apikey={apikey}",minZoom:0,maxZoom:22}}}}}),h(r,"Maps/TilesProviders/Esri.js",[],function(){return class{constructor(){this.defaultCredits="Tiles &copy; Esri &mdash; Source: Esri, DeLorme, NAVTEQ, USGS,  Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012",this.initialProjectionName="WebMercator",this.themes={WorldStreetMap:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",minZoom:0,maxZoom:20},DeLorme:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/Specialty/DeLorme_World_Base_Map/MapServer/tile/{z}/{y}/{x}",minZoom:1,maxZoom:11,credits:"Tiles &copy; Esri &mdash; Copyright: &copy;2012 DeLorme"},WorldTopoMap:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",minZoom:0,maxZoom:20,credits:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"},WorldImagery:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",minZoom:0,maxZoom:20,credits:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"},WorldTerrain:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",minZoom:0,maxZoom:13,credits:"Tiles &copy; Esri &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS"},WorldShadedRelief:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",minZoom:0,maxZoom:13,credits:"Tiles &copy; Esri &mdash; Source: Esri"},WorldPhysical:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",minZoom:0,maxZoom:8,credits:"Tiles &copy; Esri &mdash; Source: US National Park Service"},NatGeoWorldMap:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",minZoom:0,maxZoom:16,credits:"Tiles &copy; Esri &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC"},WorldGrayCanvas:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",minZoom:0,maxZoom:16,credits:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ"}}}}}),h(r,"Maps/TilesProviders/USGS.js",[],function(){return class{constructor(){this.defaultCredits='Tiles courtesy of the <a href="https://usgs.gov/">U.S. GeologicalSurvey</a>',this.initialProjectionName="WebMercator",this.themes={USTopo:{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSTopo/MapServer/tile/{z}/{y}/{x}",minZoom:0,maxZoom:20},USImagery:{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryOnly/MapServer/tile/{z}/{y}/{x}",minZoom:0,maxZoom:20},USImageryTopo:{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryTopo/MapServer/tile/{z}/{y}/{x}",minZoom:0,maxZoom:20}}}}}),h(r,"Maps/TilesProviders/TilesProviderRegistry.js",[r["Maps/TilesProviders/OpenStreetMap.js"],r["Maps/TilesProviders/Stamen.js"],r["Maps/TilesProviders/LimaLabs.js"],r["Maps/TilesProviders/Thunderforest.js"],r["Maps/TilesProviders/Esri.js"],r["Maps/TilesProviders/USGS.js"]],function(d,y,b,G,D,R){return{Esri:D,LimaLabs:b,OpenStreetMap:d,Stamen:y,Thunderforest:G,USGS:R}}),h(r,"Series/TiledWebMap/TiledWebMapSeriesDefaults.js",[],function(){return{states:{inactive:{enabled:!1}}}}),h(r,"Series/TiledWebMap/TiledWebMapSeries.js",[r["Core/Globals.js"],r["Core/Series/SeriesRegistry.js"],r["Maps/TilesProviders/TilesProviderRegistry.js"],r["Series/TiledWebMap/TiledWebMapSeriesDefaults.js"],r["Core/Utilities.js"]],function(d,y,b,G,D){let{composed:R}=d,{map:Y}=y.seriesTypes,{addEvent:te,defined:S,error:j,merge:oe,pick:N,pushUnique:re}=D;function ie(X){let{geoBounds:a,chart:t}=X,e=(t.options.series||[]).filter(f=>f.type==="tiledwebmap")[0];if(e&&e.provider&&e.provider.type&&!e.provider.url){let f=b[e.provider.type];if(S(f)){let{initialProjectionName:n}=new f;if(a){let{x1:i,y1:M,x2:P,y2:L}=a;this.recommendedMapView={projection:{name:n,parallels:[M,L],rotation:[-(i+P)/2]}}}else this.recommendedMapView={projection:{name:n},minZoom:0};return!1}j("Highcharts warning: Tiles Provider not defined in the Provider Registry.",!1)}return!0}class H extends Y{constructor(){super(...arguments),this.redrawTiles=!1,this.isAnimating=!1}static compose(a){re(R,"TiledWebMapSeries")&&te(a,"onRecommendMapView",ie)}lonLatToTile(a,t){let{lon:e,lat:f}=a;return{x:Math.floor((e+180)/360*Math.pow(2,t)),y:Math.floor((1-Math.log(Math.tan(f*Math.PI/180)+1/Math.cos(f*Math.PI/180))/Math.PI)/2*Math.pow(2,t))}}tileToLonLat(a,t,e){let f=a/Math.pow(2,e)*360-180,n=Math.PI-2*Math.PI*t/Math.pow(2,e);return{lon:f,lat:180/Math.PI*Math.atan(.5*(Math.exp(n)-Math.exp(-n)))}}drawPoints(){var q;let a=this.chart,t=a.mapView;if(!t)return;let e=this.tiles=this.tiles||{},f=this.transformGroups=this.transformGroups||[],n=this,i=this.options.provider,{zoom:M}=t,P=N(t.projection.options.rotation&&t.projection.options.rotation[0],0),L=a.renderer.forExport?0:200,B=s=>{for(let o of Object.keys(e))parseFloat(o)===(t.zoom<0?0:Math.floor(t.zoom))||n.minZoom&&(t.zoom<0?0:Math.floor(t.zoom))<n.minZoom&&parseFloat(o)===n.minZoom||n.maxZoom&&(t.zoom<0?0:Math.floor(t.zoom))>n.maxZoom&&parseFloat(o)===n.maxZoom?Object.keys(e[o].tiles).forEach((m,l)=>{e[o].tiles[m].animate({opacity:1},{duration:s},()=>{l===Object.keys(e[o].tiles).length-1&&(e[o].isActive=!0)})}):Object.keys(e[o].tiles).forEach((m,l)=>{e[o].tiles[m].animate({opacity:0},{duration:s,defer:s/2},()=>{e[o].tiles[m].destroy(),delete e[o].tiles[m],l===Object.keys(e[o].tiles).length-1&&(e[o].isActive=!1,e[o].loaded=!1)})})},c=M<0?0:Math.floor(M),z=Math.pow(2,c),V=.638436911716859*Math.pow(2,M)/(.638436911716859*Math.pow(2,c)),E=256*V;if(i&&(i.type||i.url)){if(i.type&&!i.url){let s=b[i.type];if(!S(s)){j("Highcharts warning: Tiles Provider '"+i.type+"' not defined in the ProviderRegistry.",!1);return}let o=new s,m=o.initialProjectionName,l,T="";if(i.theme&&S(o.themes[i.theme]))l=o.themes[i.theme];else{let C=Object.keys(o.themes)[0];l=o.themes[C],j("Highcharts warning: The Tiles Provider's Theme '"+i.theme+"' is not defined in the Provider definition - falling back to '"+C+"'.",!1)}i.subdomain&&o.subdomains&&o.subdomains.indexOf(i.subdomain)!==-1?T=i.subdomain:S(o.subdomains)&&l.url.indexOf("{s}")!==-1&&(T=N(o.subdomains&&o.subdomains[0],""),j("Highcharts warning: The Tiles Provider's Subdomain '"+i.subdomain+"' is not defined in the Provider definition - falling back to '"+T+"'.",!1)),o.requiresApiKey&&(i.apiKey?l.url=l.url.replace("{apikey}",i.apiKey):(j("Highcharts warning: The Tiles Provider requires API Key to use tiles, use provider.apiKey to provide a token.",!1),l.url=l.url.replace("?apikey={apikey}",""))),i.url=l.url.replace("{s}",T),this.minZoom=l.minZoom,this.maxZoom=l.maxZoom;let Z=N(a.userOptions.credits&&a.userOptions.credits.text,"Highcharts.com "+N(l.credits,o.defaultCredits));a.credits?a.credits.update({text:Z}):a.addCredits({text:Z,style:N((q=a.options.credits)==null?void 0:q.style,{})}),t.projection.options.name!==m&&j("Highcharts warning: The set projection is different than supported by Tiles Provider.",!1)}else t.projection.options.name||j("Highcharts warning: The set projection is different than supported by Tiles Provider.",!1);if(S(this.minZoom)&&c<this.minZoom?(z=Math.pow(2,c=this.minZoom),E=256*(V=.638436911716859*Math.pow(2,M)/(.638436911716859*Math.pow(2,c)))):S(this.maxZoom)&&c>this.maxZoom&&(z=Math.pow(2,c=this.maxZoom),E=256*(V=.638436911716859*Math.pow(2,M)/(.638436911716859*Math.pow(2,c)))),t.projection&&t.projection.def){t.projection.hasCoordinates=!0,f[c]||(f[c]=a.renderer.g().add(this.group));let s=(u,g,p,$)=>u.replace("{x}",g.toString()).replace("{y}",p.toString()).replace("{zoom}",$.toString()).replace("{z}",$.toString()),o=(u,g,p,$,se)=>{let K=u%z,F=g%z,ae=K<0?K+z:K,ne=F<0?F+z:F;if(!e[`${p}`].tiles[`${u},${g}`]&&i.url){let Q=s(i.url,ae,ne,p);e[p].loaded=!1,e[`${p}`].tiles[`${u},${g}`]=a.renderer.image(Q,u*E-$,g*E-se,E,E).attr({zIndex:2,opacity:0}).on("load",function(){i.onload&&i.onload.apply(this),(p===(t.zoom<0?0:Math.floor(t.zoom))||p===n.minZoom)&&(e[`${p}`].actualTilesCount++,e[`${p}`].howManyTiles===e[`${p}`].actualTilesCount&&(e[p].loaded=!0,n.isAnimating?n.redrawTiles=!0:(n.redrawTiles=!1,B(L)),e[`${p}`].actualTilesCount=0))}).add(f[p]),e[`${p}`].tiles[`${u},${g}`].posX=u,e[`${p}`].tiles[`${u},${g}`].posY=g,e[`${p}`].tiles[`${u},${g}`].originalURL=Q}},m=t.pixelsToProjectedUnits({x:0,y:0}),l=t.projection.def.inverse([m.x,m.y]),T={lon:l[0]-P,lat:l[1]},Z=t.pixelsToProjectedUnits({x:a.plotWidth,y:a.plotHeight}),C=t.projection.def.inverse([Z.x,Z.y]),O={lon:C[0]-P,lat:C[1]};(T.lat>t.projection.maxLatitude||O.lat<-1*t.projection.maxLatitude)&&(T.lat=t.projection.maxLatitude,O.lat=-1*t.projection.maxLatitude);let v=this.lonLatToTile(T,c),k=this.lonLatToTile(O,c),W=this.tileToLonLat(v.x,v.y,c),w=t.projection.def.forward([W.lon+P,W.lat]),I=t.projectedUnitsToPixels({x:w[0],y:w[1]}),U=v.x*E-I.x,_=v.y*E-I.y;e[`${c}`]||(e[`${c}`]={tiles:{},isActive:!1,howManyTiles:0,actualTilesCount:0,loaded:!1}),e[`${c}`].howManyTiles=(k.x-v.x+1)*(k.y-v.y+1),e[`${c}`].actualTilesCount=0;for(let u=v.x;u<=k.x;u++)for(let g=v.y;g<=k.y;g++)o(u,g,c,U,_)}for(let s of Object.keys(e))for(let o of Object.keys(e[s].tiles))if(t.projection&&t.projection.def){let m=256*(.638436911716859*Math.pow(2,M)/(.638436911716859*Math.pow(2,parseFloat(s)))),l=e[s].tiles[Object.keys(e[s].tiles)[0]],{posX:T,posY:Z}=e[s].tiles[o];if(S(T)&&S(Z)&&S(l.posX)&&S(l.posY)){let C=this.tileToLonLat(l.posX,l.posY,parseFloat(s)),O=t.projection.def.forward([C.lon+P,C.lat]),v=t.projectedUnitsToPixels({x:O[0],y:O[1]}),k=l.posX*m-v.x,W=l.posY*m-v.y;if(a.renderer.globalAnimation&&a.hasRendered){let w=Number(e[s].tiles[o].attr("x")),I=Number(e[s].tiles[o].attr("y")),U=Number(e[s].tiles[o].attr("width")),_=Number(e[s].tiles[o].attr("height")),u=(g,p)=>{e[s].tiles[o].attr({x:w+(T*m-k-w)*p.pos,y:I+(Z*m-W-I)*p.pos,width:U+(Math.ceil(m)+1-U)*p.pos,height:_+(Math.ceil(m)+1-_)*p.pos})};n.isAnimating=!0,e[s].tiles[o].attr({animator:0}).animate({animator:1},{step:u},function(){n.isAnimating=!1,n.redrawTiles&&(n.redrawTiles=!1,B(L))})}else(n.redrawTiles||parseFloat(s)!==c||(e[s].isActive||parseFloat(s)===c)&&Object.keys(e[s].tiles).map(w=>e[s].tiles[w]).some(w=>w.opacity===0))&&(n.redrawTiles=!1,B(L)),e[s].tiles[o].attr({x:T*m-k,y:Z*m-W,width:Math.ceil(m)+1,height:Math.ceil(m)+1})}}}else j("Highcharts warning: Tiles Provider not defined in the Provider Registry.",!1)}update(){var i;let{transformGroups:a}=this,t=this.chart,e=t.mapView,f=arguments[0],{provider:n}=f;if(a&&(a.forEach(M=>{Object.keys(M).length!==0&&M.destroy()}),this.transformGroups=[]),e&&!S((i=t.userOptions.mapView)==null?void 0:i.projection)&&n&&n.type){let M=b[n.type];if(M){let{initialProjectionName:P}=new M;e.update({projection:{name:P}})}}super.update.apply(this,arguments)}}return H.defaultOptions=oe(Y.defaultOptions,G),y.registerSeriesType("tiledwebmap",H),H}),h(r,"masters/modules/tiledwebmap.src.js",[r["Core/Globals.js"],r["Maps/TilesProviders/TilesProviderRegistry.js"],r["Series/TiledWebMap/TiledWebMapSeries.js"]],function(d,y,b){return d.TilesProviderRegistry=d.TilesProviderRegistry||y,b.compose(d.MapView),d})})})(J);var ee=J.exports;const me=le(ee),de=pe({__proto__:null,default:me},[ee]);export{de as t};
